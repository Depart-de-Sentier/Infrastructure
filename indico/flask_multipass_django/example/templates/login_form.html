{# https://github.com/indico/flask-multipass/blob/master/example/templates/login_form.html #}

{% with messages = get_flashed_messages(with_categories=True) %}
    {% if messages %}
        <ul>
            {%- for category, message in messages %}
                <li>{{ category }}: {{ message }}</li>
            {% endfor -%}
        </ul>
    {% endif %}
{% endwith %}

<p>Log in using <strong>{{ provider.title }}</strong></p>

<form method=post>
    {% for field in form %}
        {% if field.widget.__class__.__name__ == 'HiddenInput' %}
            {{ field() }}
        {% else %}
            <div>
                {{ field.label() }}
                {{ field() }}
                {% if field.errors %}
                    Errors: {{ field.errors|join(' / ') }}
                {% endif %}
            </div>
        {% endif %}
    {% endfor %}
    <input type="submit" value="Login">
</form>
